<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <title>Do2Date - Free Student Assignment & Test Tracker</title>
    <meta name="description" content="Free online assignment organizer for students. Track homework, assignments, tests, and due dates. Simple, easy-to-use student planner that saves your progress.">
    <meta name="keywords" content="assignment tracker, student planner, homework organizer, test tracker, due date tracker, student assignment planner, free student organizer">
    <meta name="author" content="Do2Date">

    <!-- Open Graph (for social media sharing) -->
    <meta property="og:title" content="Do2Date - Free Student Assignment Tracker">
    <meta property="og:description" content="Track your assignments, tests, and due dates all in one place. Free student planner that saves your progress.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://do2date.com">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Do2Date - Free Student Assignment Tracker">
    <meta name="twitter:description" content="Track your assignments, tests, and due dates all in one place.">

    <!-- Favicon (optional - you can add later) -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Do2Date">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css?v=2">
</head>
<body>

<!-- Install PWA Prompt -->
<div id="installPrompt" style="display:none; position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:var(--bg-primary); padding:16px 24px; border-radius:12px; box-shadow:var(--shadow-lg); z-index:1000; border:2px solid var(--primary); max-width:90%; width:400px;">
    <div style="display:flex; align-items:center; justify-content:space-between; gap:16px;">
        <div>
            <strong style="display:block; margin-bottom:4px; color:var(--text-primary);">Install Do2Date</strong>
            <span style="font-size:0.9em; color:var(--text-secondary);">Add to home screen for quick access!</span>
        </div>
        <div style="display:flex; gap:8px;">
            <button id="installButton" style="background:var(--primary); color:white; padding:8px 16px; border:none; border-radius:8px; cursor:pointer; font-weight:500;">Install</button>
            <button id="dismissInstall" style="background:var(--bg-tertiary); color:var(--text-primary); padding:8px 16px; border:none; border-radius:8px; cursor:pointer;">Later</button>
        </div>
    </div>
</div>

<div class="header-container">
    <h1>ðŸ“š Do2Date</h1>
    <div style="display:flex; gap:12px; align-items:center;">
        <button id="signInButton" class="dark-mode-toggle" onclick="showAuthModalAgain()" title="Sign in to sync data" style="font-size:1rem; padding:8px 16px; display:none; background:var(--primary); color:white; border-radius:8px; white-space:nowrap;">Sign In</button>
        <button id="userButton" class="dark-mode-toggle" onclick="showUserMenu()" title="Account" style="font-size:1.2rem; display:none;">ðŸ‘¤</button>
        <button id="gamesButton" class="dark-mode-toggle" onclick="showGamesMenu()" title="Mini Games" style="font-size:1.2rem;">ðŸŽ®</button>
        <button id="exportButton" class="dark-mode-toggle" onclick="showExportMenu()" title="Export data" style="font-size:1.2rem;">ðŸ“¤</button>
        <button id="notificationToggle" class="dark-mode-toggle" onclick="toggleNotifications()" title="Toggle notifications" style="font-size:1.2rem;">ðŸ””</button>
        <button id="darkModeToggle" class="dark-mode-toggle" onclick="toggleDarkMode()" title="Toggle dark mode">ðŸŒ™</button>
    </div>
</div>

<div class="tabs">
    <button id="classesTab" class="tab-button active" onclick="switchView('classes')">My Classes</button>
    <button id="allItemsTab" class="tab-button" onclick="switchView('allItems')">All Items</button>
    <button id="calendarTab" class="tab-button" onclick="switchView('calendar')">Calendar</button>
</div>

<div id="classesView">
    <div class="add-class">
        <input id="classInput" placeholder="Enter class name">
        <button id="addClassBtn">Add Class</button>
    </div>

    <div id="classesContainer"></div>
</div>

<div id="allItemsView" style="display:none;">
    <div id="allItemsContainer"></div>
</div>

<div id="calendarView" style="display:none;">
    <div id="calendarContainer"></div>
</div>

<!-- Auth Modal -->
<div id="authModal" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.7); z-index:2000; align-items:center; justify-content:center;">
    <div style="background:var(--bg-primary); padding:32px; border-radius:16px; max-width:400px; width:90%; box-shadow:var(--shadow-lg);" onclick="event.stopPropagation()">
        <h2 style="margin:0 0 8px 0; color:var(--text-primary); text-align:center;">Welcome to Do2Date</h2>
        <p style="text-align:center; color:var(--text-secondary); margin:0 0 24px 0; font-size:0.9em;">Sign in to sync your data across devices</p>

        <!-- Google Sign In -->
        <button onclick="signInWithGoogle()" style="width:100%; padding:12px; background:white; color:#333; border:1px solid #ddd; border-radius:8px; cursor:pointer; font-weight:500; margin-bottom:16px; display:flex; align-items:center; justify-content:center; gap:8px;">
            <svg width="18" height="18" viewBox="0 0 18 18"><path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.875 2.684-6.615z"/><path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/><path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707 0-.593.102-1.17.282-1.709V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.335z"/><path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/></svg>
            Continue with Google
        </button>

        <div style="text-align:center; color:var(--text-secondary); margin:16px 0; font-size:0.9em;">or</div>

        <!-- Email/Password Form -->
        <div id="emailAuthForm">
            <input type="email" id="authEmail" placeholder="Email" style="width:100%; padding:12px; margin-bottom:12px; border:2px solid var(--border); border-radius:8px; background:var(--bg-secondary); color:var(--text-primary);">
            <input type="password" id="authPassword" placeholder="Password" style="width:100%; padding:12px; margin-bottom:16px; border:2px solid var(--border); border-radius:8px; background:var(--bg-secondary); color:var(--text-primary);">

            <button onclick="signInWithEmail()" style="width:100%; padding:12px; background:var(--primary); color:white; border:none; border-radius:8px; cursor:pointer; font-weight:600; margin-bottom:8px;">Sign In</button>
            <button onclick="signUpWithEmail()" style="width:100%; padding:12px; background:var(--bg-tertiary); color:var(--text-primary); border:none; border-radius:8px; cursor:pointer; font-weight:500;">Create Account</button>
        </div>

        <p style="text-align:center; margin-top:20px; font-size:0.85em; color:var(--text-secondary);">
            <a href="#" onclick="continueWithoutLogin(); return false;" style="color:var(--primary); text-decoration:none;">Continue without signing in</a>
        </p>

        <div id="authError" style="display:none; margin-top:12px; padding:10px; background:#fee; border:1px solid #fcc; border-radius:6px; color:#c00; font-size:0.9em;"></div>
    </div>
</div>

<script src="script.js?v=36"></script>
<script src="games.js"></script>

<!-- Firebase SDK -->
<script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, signInWithPopup, GoogleAuthProvider } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
    import { getDatabase, ref, set, get, onValue } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

    const firebaseConfig = {
        apiKey: "AIzaSyDMUYpjYlhz6oTIleIRFtsIDsa2DJ1JJQQ",
        authDomain: "do2date.firebaseapp.com",
        databaseURL: "https://do2date-default-rtdb.firebaseio.com",
        projectId: "do2date",
        storageBucket: "do2date.firebasestorage.app",
        messagingSenderId: "400907128510",
        appId: "1:400907128510:web:4637204f184d355cd098ef",
        measurementId: "G-RLGG964W6X"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const database = getDatabase(app);

    // Make Firebase available globally
    window.firebaseAuth = auth;
    window.firebaseDatabase = database;
    window.firebaseSignInWithEmailAndPassword = signInWithEmailAndPassword;
    window.firebaseCreateUserWithEmailAndPassword = createUserWithEmailAndPassword;
    window.firebaseSignOut = signOut;
    window.firebaseSignInWithPopup = signInWithPopup;
    window.firebaseGoogleAuthProvider = GoogleAuthProvider;
    window.firebaseRef = ref;
    window.firebaseSet = set;
    window.firebaseGet = get;
    window.firebaseOnValue = onValue;
    window.firebaseOnAuthStateChanged = onAuthStateChanged;

    // Mark Firebase as ready
    window.firebaseReady = true;
    console.log('âœ… Firebase SDK loaded');

    // DON'T call initializeAuth here - let the script call it when ready
</script>
</body>
</html>